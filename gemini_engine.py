# import google.generativeai as genai
# import PIL.Image
# import config  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º–ø–æ—Ä—Ç –∫–ª—é—á–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
# import random

# # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Ç–≤–æ–µ–≥–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
# genai.configure(api_key=config.GEMINI_API_KEY)

# # –¢–≤–æ–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
# MODELS_TO_TRY = [
#     'gemini-2.5-flash-lite', 
#     'gemini-3-flash',        
#     'gemini-1.5-flash',      
#     'gemini-2.5-flash'       
# ]

# def classify_image(image_path):
#     """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –ø–µ—Ä–µ–±–∏—Ä–∞—è –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤"""
#     for model_name in MODELS_TO_TRY:
#         try:
#             model = genai.GenerativeModel(model_name)
#             img = PIL.Image.open(image_path)
            
#             # –¢–≤–æ–π —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
#             prompt = """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–∞—Ä—Ç–∏–Ω–∫—É –∏ –≤–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û –û–î–ù–û —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞: 
#             alkohol, syry, maso, klobasa/sunka/salam/parky, ovoce a zelenina, pecivo, cistidla, nadobi, pivo, general, info. 
#             –ï—Å–ª–∏ —ç—Ç–æ –º—è—Å–æ - maso. –ï—Å–ª–∏ –∞–ª–∫–æ–≥–æ–ª—å - alkohol. –ï—Å–ª–∏ —Ö–ª–µ–± - pecivo. –ï—Å–ª–∏ —Å—ã—Ä—ã - syry.
#             –ï—Å–ª–∏ –∫–æ–ª–±–∞—Å–∞/–≤–µ—Ç—á–∏–Ω–∞/—Å–∞–ª—è–º–∏/—Å–æ—Å–∏—Å–∫–∏ - klobasa/sunka/salam/parky. –ï—Å–ª–∏ –æ–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã - ovoce a zelenina.
#             –ï—Å–ª–∏ —á–∏—Å—Ç—è—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ - cistidla. –ï—Å–ª–∏ –ø–∏–≤–æ - pivo. –ï—Å–ª–∏ –∫—É—Ö–æ–Ω–Ω–∞—è —É—Ç–≤–∞—Ä—å - nadobi.
#             –ï—Å–ª–∏ –ø—Ä–æ–¥—É–∫—Ç—ã –≤–ø–µ—Ä–µ–º–µ—à–∫—É - general. –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–ª–∏ –∏–Ω—Ñ–æ –æ —á–∞—Å–∞—Ö —Ä–∞–±–æ—Ç—ã - info."""
            
#             response = model.generate_content([prompt, img])
#             category = response.text.strip().lower()
#             print(f"‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è ({model_name}): {category}")
#             return category
            
#         except Exception as e:
#             if "429" in str(e) or "Quota" in str(e):
#                 print(f"‚ö†Ô∏è –ú–æ–¥–µ–ª—å {model_name} –∑–∞–Ω—è—Ç–∞, –ø—Ä–æ–±—É—é —Å–ª–µ–¥—É—é—â—É—é –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏...")
#                 continue
#             print(f"‚ùå –û—à–∏–±–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ {model_name}: {e}")
#             continue
#     return "general" # –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ –≤—Å—ë —É–ø–∞–ª–æ

# def generate_fun_caption(image_path, store_name):
#     """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, –ø–µ—Ä–µ–±–∏—Ä–∞—è –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏"""
#     # –°–ø–∏—Å–æ–∫ —Å–ª–µ–Ω–≥–∞ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ (–∫–∞–∫ —Ç—ã –ø—Ä–æ—Å–∏–ª —Ä–∞–Ω–µ–µ)
#     SLANG_POOL = ["—Å–∞—Å", "–∫–∞–π—Ñ", "–Ω–∏—á–æ—Å–∏", "–ø—É—à–∫–∞-—Ä–∞–∫–µ—Ç–∞", "–≤–∞—É", "–∞–¥–∏—â–µ", "–æ–≥–æ", "–∑–∞–±–∞–≤–Ω–æ", "–æ–ø–∞-–ø–∞-–ø–∞", "—à–æ"]
#     random_slang = random.sample(SLANG_POOL, 2)

#     for model_name in MODELS_TO_TRY:
#         try:
#             print(f"ü§ñ –ü—Ä–æ–±—É—é –º–æ–¥–µ–ª—å –¥–ª—è —Ç–µ–∫—Å—Ç–∞: {model_name}...")
#             model = genai.GenerativeModel(model_name)
            
#             with PIL.Image.open(image_path) as img:
#                 rgb_img = img.convert('RGB')
                
#                 prompt = f"""
#                 –¢—ã ‚Äî —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Å–∫–∏–¥–∫–∞–º –≤ –ß–µ—Ö–∏–∏ —Å –æ—Ç–ª–∏—á–Ω—ã–º —é–º–æ—Ä–æ–º. 
#                 –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ {store_name}.
                
#                 –ò–ù–°–¢–†–£–ö–¶–ò–Ø:
#                 1. –ü–∏—à–∏ –°–¢–†–û–ì–û –ù–ê –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ.
#                 2. –ò—Å–ø–æ–ª—å–∑—É–π –≤ —Ç–µ–∫—Å—Ç–µ –°–¢–†–û–ì–û 1-2 —Å–ª–æ–≤–∞ –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞: {', '.join(random_slang)}.
#                 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –ö–†–ò–ß–ê–©–ò–ô –ó–ê–ì–û–õ–û–í–û–ö, —é–º–æ—Ä –ø—Ä–æ –∂–∏–∑–Ω—å –≤ –ß–µ—Ö–∏–∏, –±—ã—Å—Ç—Ä—ã–π —Ä–µ—Ü–µ–ø—Ç/—Å–æ–≤–µ—Ç.
#                 4. –í–µ—Å—å —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ù–ò–ñ–ù–ï–ú –†–ï–ì–ò–°–¢–†–ï, —É–º–µ—Å—Ç–Ω—ã–µ –µ–º–æ–¥–∑–∏.
#                 """
                
#                 response = model.generate_content([prompt, rgb_img])
#                 return response.text.strip()
                
#         except Exception as e:
#             if "429" in str(e) or "Quota" in str(e):
#                 print(f"‚ö†Ô∏è –ú–æ–¥–µ–ª—å {model_name} (—Ç–µ–∫—Å—Ç) ‚Äî –ª–∏–º–∏—Ç. –ü—Ä–æ–±—É—é —Å–ª–µ–¥—É—é—â—É—é...")
#                 continue
#             print(f"‚ùå –û—à–∏–±–∫–∞ —Ç–µ–∫—Å—Ç–∞ —É {model_name}: {e}")
#             continue

#     return f"<b>–º–µ–≥–∞-—Å–∫–∏–¥–∫–∏ –≤ {store_name.lower()}! –∑–∞–±–∏—Ä–∞–π, –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑–æ–±—Ä–∞–ª–∏! #akce</b>"